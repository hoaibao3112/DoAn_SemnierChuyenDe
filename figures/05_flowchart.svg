<svg xmlns="http://www.w3.org/2000/svg" width="1000" height="1200" viewBox="0 0 1000 1200">
  <rect width="100%" height="100%" fill="#fff"/>
  <style>
    .title{font:700 18px 'Segoe UI', Roboto, Arial; fill:#111}
    .box{font:14px 'Segoe UI', Roboto, Arial; fill:#111}
    .step{fill:#f8fbff; stroke:#cfe0ff;}
    .dec{fill:#fff8e1; stroke:#f0e1b8}
  </style>
  <text x="20" y="28" class="title">Hình 5 — Lưu đồ xử lý tóm tắt</text>

  <!-- Start -->
  <ellipse cx="500" cy="80" rx="140" ry="28" fill="#e8fff2" stroke="#cfead6"/>
  <text x="420" y="86" class="box">Bắt đầu</text>

  <!-- Input -->
  <rect x="300" y="120" width="400" height="48" rx="6" ry="6" class="step"/> 
  <text x="380" y="152" class="box">Nhập câu (st.text_input)</text>

  <!-- Validation -->
  <polygon points="500,190 540,220 500,250 460,220" class="dec" stroke="#f0e1b8"/>
  <text x="470" y="225" class="box">len >= 5?</text>

  <!-- normalize -->
  <rect x="300" y="270" width="400" height="48" rx="6" ry="6" class="step"/>
  <text x="370" y="302" class="box">normalize_vi() (preprocess.py)</text>

  <!-- predict -->
  <rect x="300" y="340" width="400" height="48" rx="6" ry="6" class="step"/>
  <text x="380" y="372" class="box">predict_sentiment() (nlp.py)</text>

  <!-- threshold decision -->
  <polygon points="500,410 540,440 500,470 460,440" class="dec" stroke="#f0e1b8"/>
  <text x="435" y="445" class="box">score &lt; 0.50 ?</text>

  <!-- save -->
  <rect x="300" y="500" width="400" height="48" rx="6" ry="6" class="step"/>
  <text x="390" y="532" class="box">add_record() → SQLite (db.py)</text>

  <!-- display -->
  <rect x="300" y="570" width="400" height="48" rx="6" ry="6" class="step"/>
  <text x="370" y="602" class="box">Hiển thị kết quả (st.success/error/info)</text>

  <!-- history -->
  <rect x="300" y="640" width="400" height="48" rx="6" ry="6" class="step"/>
  <text x="350" y="672" class="box">list_latest(50) + Hiển thị lịch sử</text>

  <!-- End -->
  <ellipse cx="500" cy="740" rx="140" ry="28" fill="#fff5f5" stroke="#f0d6d6"/>
  <text x="460" y="746" class="box">Kết thúc</text>

  <!-- arrows -->
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="6" refY="3" orient="auto">
      <path d="M0,0 L0,6 L6,3 z" fill="#333" />
    </marker>
  </defs>
  <line x1="500" y1="108" x2="500" y2="120" stroke="#333" marker-end="url(#arrow)"/>
  <line x1="500" y1="168" x2="500" y2="190" stroke="#333" marker-end="url(#arrow)"/>
  <line x1="500" y1="250" x2="500" y2="270" stroke="#333" marker-end="url(#arrow)"/>
  <line x1="500" y1="318" x2="500" y2="340" stroke="#333" marker-end="url(#arrow)"/>
  <line x1="500" y1="392" x2="500" y2="410" stroke="#333" marker-end="url(#arrow)"/>
  <line x1="500" y1="470" x2="500" y2="500" stroke="#333" marker-end="url(#arrow)"/>
  <line x1="500" y1="548" x2="500" y2="570" stroke="#333" marker-end="url(#arrow)"/>
  <line x1="500" y1="618" x2="500" y2="640" stroke="#333" marker-end="url(#arrow)"/>
  <line x1="500" y1="688" x2="500" y2="712" stroke="#333" marker-end="url(#arrow)"/>

</svg>